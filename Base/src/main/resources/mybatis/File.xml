<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.whut.tomasyao.file.mapper.FileMapper">
    <!--暂时不使用缓存-->
    <!--<cache eviction="LRU" flushInterval="60000" size="1024" readOnly="true"/>-->

    <resultMap id="getFileRM" type="com.whut.tomasyao.file.vo.FileVo">
        <id property="id" column="id"/>
        <result property="url" column="url"/>
        <result property="create_time" column="create_time"/>
        <result property="is_deleted" column="is_deleted"/>
        <result property="type" column="type" typeHandler="org.apache.ibatis.type.EnumOrdinalTypeHandler"/>
    </resultMap>

    <select id="getFile" parameterType="int" resultMap="getFileRM">
        select * from file f where f.id=#{0}
    </select>

    <insert id="addFile" parameterType="com.whut.tomasyao.file.model.File" useGeneratedKeys="true"
            keyProperty="id">
        insert into file(url, is_deleted, create_time, type)
        values(#{url}, #{is_deleted}, #{create_time}, #{type, typeHandler=org.apache.ibatis.type.EnumOrdinalTypeHandler})
    </insert>

</mapper>
